<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Helper function for custom lcModel classes implementing predict.lcModel() — transformPredict • latrend</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Helper function for custom lcModel classes implementing predict.lcModel() — transformPredict"><meta property="og:description" content='A helper function for implementing the predict.lcModel() method as part of your own lcModel class, ensuring the correct output type and format (see the Value section).
Note that this function has no use outside of ensuring output for predict.lcModel. For implementing lcModel predictions from scratch, it is advisable to implement predictForCluster instead of predict.lcModel.
The prediction ordering corresponds to the observation ordering of the newdata argument.
By default, transformPredict() accepts one of the following inputs:
data.frame
A data.frame in long format providing a cluster-specific prediction for each observation per row, with column names "Fit" and "Cluster". This data.frame therefore has nobs(object) * nClusters(object) rows.

matrix
An N-by-K matrix where each row provides the cluster-specific predictions for the respective observations in newdata. Here, N = nrow(newdata) and K = nClusters(object).

vector
A vector of length nrow(newdata) with predictions corresponding to the rows of newdata.




Users can implement support for other prediction formats by defining the transformPredict() method with other signatures.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">latrend</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/demo.html">Demonstration of latrend package</a>
    </li>
    <li>
      <a href="../articles/implement.html">Implementing new models</a>
    </li>
    <li>
      <a href="../articles/simulation.html">Conducting a simulation study</a>
    </li>
    <li>
      <a href="../articles/validation.html">Validating cluster models</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/philips-software/latrend/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Helper function for custom lcModel classes implementing predict.lcModel()</h1>
    <small class="dont-index">Source: <a href="https://github.com/philips-software/latrend/blob/HEAD/R/model-transform.R" class="external-link"><code>R/model-transform.R</code></a></small>
    <div class="hidden name"><code>transformPredict.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A helper function for implementing the <a href="predict.lcModel.html">predict.lcModel()</a> method as part of your own <code>lcModel</code> class, ensuring the correct output type and format (see the Value section).
Note that this function has no use outside of ensuring output for <code>predict.lcModel</code>. For implementing <code>lcModel</code> predictions from scratch, it is advisable to implement <a href="predictForCluster.html">predictForCluster</a> instead of <a href="predict.lcModel.html">predict.lcModel</a>.</p>
<p>The prediction ordering corresponds to the observation ordering of the <code>newdata</code> argument.</p>
<p>By default, <code>transformPredict()</code> accepts one of the following inputs:</p><dl><dt><code>data.frame</code></dt>
<dd><p>A <code>data.frame</code> in long format providing a cluster-specific prediction for each observation per row, with column names <code>"Fit"</code> and <code>"Cluster"</code>. This <code>data.frame</code> therefore has <code>nobs(object) * nClusters(object)</code> rows.</p></dd>

<dt><code>matrix</code></dt>
<dd><p>An N-by-K <code>matrix</code> where each row provides the cluster-specific predictions for the respective observations in <code>newdata</code>. Here, <code>N = nrow(newdata)</code> and <code>K = nClusters(object)</code>.</p></dd>

<dt><code>vector</code></dt>
<dd><p>A <code>vector</code> of length <code>nrow(newdata)</code> with predictions corresponding to the rows of <code>newdata</code>.</p></dd>


</dl><p>Users can implement support for other prediction formats by defining the <code>transformPredict()</code> method with other signatures.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">transformPredict</span><span class="op">(</span><span class="va">pred</span>, <span class="va">model</span>, <span class="va">newdata</span><span class="op">)</span>

<span class="co"># S4 method for `NULL`,lcModel</span>
<span class="fu">transformPredict</span><span class="op">(</span><span class="va">pred</span>, <span class="va">model</span>, <span class="va">newdata</span><span class="op">)</span>

<span class="co"># S4 method for vector,lcModel</span>
<span class="fu">transformPredict</span><span class="op">(</span><span class="va">pred</span>, <span class="va">model</span>, <span class="va">newdata</span><span class="op">)</span>

<span class="co"># S4 method for matrix,lcModel</span>
<span class="fu">transformPredict</span><span class="op">(</span><span class="va">pred</span>, <span class="va">model</span>, <span class="va">newdata</span><span class="op">)</span>

<span class="co"># S4 method for data.frame,lcModel</span>
<span class="fu">transformPredict</span><span class="op">(</span><span class="va">pred</span>, <span class="va">model</span>, <span class="va">newdata</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>pred</dt>
<dd><p>The (per-cluster) predictions for <code>newdata</code>.</p></dd>
<dt>model</dt>
<dd><p>The <code>lcModel</code> for which the prediction was made.</p></dd>
<dt>newdata</dt>
<dd><p>A <code>data.frame</code> containing the input data to predict for.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>data.frame</code> with the predictions, or a list of cluster-specific prediction <code>data.frame</code>s.</p>
    </div>
    <div id="example-implementation">
    <h2>Example implementation</h2>
    

<p>In case we have a custom <code>lcModel</code> class based on an existing internal model representation with a <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> function,
we can use <code>transformPredict()</code> to easily transform the internal model predictions to the right format.
A common output is a <code>matrix</code> with the cluster-specific predictions.</p><div class="sourceCode"><pre><code><span class="va">predict.lcModelExample</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">predictionMatrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">object</span><span class="op">@</span><span class="va">model</span>, <span class="va">newdata</span><span class="op">)</span>
  <span class="fu"><a href="../reference/transformPredict.html">transformPredict</a></span><span class="op">(</span>
    pred <span class="op">=</span> <span class="va">predictionMatrix</span>,
    model <span class="op">=</span> <span class="va">object</span>,
    newdata <span class="op">=</span> <span class="va">newdata</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>

<p>However, for ease of implementation it is generally advisable to implement <a href="predictForCluster.html">predictForCluster</a> instead of <a href="predict.lcModel.html">predict.lcModel</a>.</p>
<p>For a complete and runnable example, see the custom models vignette accessible via <code>vignette("custom", package = "latrend")</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>predictForCluster, predict.lcModel</p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Niek Den Teuling.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

