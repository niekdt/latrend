---
title: "modelSelection"
author: "Niek Den Teuling"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
    toc: true # table of content true
    toc_depth : 2  
vignette: >
  %\VignetteIndexEntry{modelSelection}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
library(latrend)
library(ggplot2)
knitr::opts_chunk$set(
  cache = TRUE,
  collapse = TRUE,
  comment = "#>"
)
update_geom_defaults('line', list(size = .01))
update_geom_defaults('point', list(size = .5))
options(latrend.verbose=TRUE)
```

We will demonstrate how the exploration of the most appropriate method and model can be done in a more systematic way. This vignette is a follow-up on the demonstration vignette. As such, the data exploration step is skipped.

```{r, results='hide',message=FALSE,warning=FALSE}
library(latrend)
library(ggplot2)
library(magrittr)
```

# Loading the data
We explore the `OSA1y30` dataset. This is a synthetic dataset for which the reference group of each trajectory is available. However, in this vignette we will assume that the group specification and number of groups are unknown.
```{r}
data(latrendData)
head(latrendData)
```

Specify the package options to adopt the respective column names of the loaded dataset, for convenience.
```{r}
options(latrend.id = "Id", latrend.time = "Time")
```

Specify KML models for a varying number of clusters.
```{r}
methods = lcMethods(lcMethodKML("Y", nRuns=10), nClusters=1:9)

kmlModels = latrendBatch(methods, data=latrendData, verbose=FALSE)
```

Specify two-step cluster models for a varying number of clusters.
```{r}
methods = lcMethods(lcMethodKML("Y", nRuns = 10), nClusters = 1:9)

kmlModels = latrendBatch(methods, data = latrendData, verbose = FALSE)
```
